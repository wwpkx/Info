---
mindmap-plugin: basic
---
# 直方图
## 介绍
- **直方图（Image Histogram）** 是 **数据统计** 的一种方法
- 目的：了解图像的对比度，亮度，强度分布
- **直方图**是**根据灰度图进行绘制**的
- 横坐标,  **左侧为较暗区域**,  较暗图片数据多集中于左侧
-  直方图的一些**术语和细节**
	- dims：需要统计的特征数目。dims = 1 ，仅仅统计了灰度值
	- bins：每个特征空间子区段的数目，可译为 “直条” 或 “组距”， bins = 16
	- range：要统计特征的取值范围。range =` [0, 255]`。
## 直方图分类
- 一维直方图
    - 只考虑一个特征，即像素的灰度强度值
    - 从BGR转换为灰度
- 二维直方图
    - 考虑两个特征。颜色直方图，HSV的 色调 和 饱和度值
    - 从BGR转换为HSV

## 直方图绘制
- `cv.calcHist(images，channels，mask，histSize，ranges)`
- images: 原图像。例如：`[img]`。
- channels
	- **是灰度图**，它的值就是 `[0]`；
	- **是彩色图像**，参数 `[0]，[1]，[2]` 对应着通道 B，G，R
- mask: 掩膜图像
	- 获取**整幅图像**的直方图就把它设为 None　　
	- 获取**感兴趣区域**的直方图
- histSize: BIN 的数目。例如：`[256]`
- ranges: 像素值范围，通常为 `[0，256]`

## 直方图均衡化
- 考虑的是**图像的全局对比度**
- 大多数的像素值都集中在一个范围内
	- 很暗，曝光不足
	- 很亮，曝光过度
- **增强图像对比度**的一种方法
- 在**曝光过度或不足**的图像中可以更好的突出细节
- 原理，矩阵变化，将细高的图像压扁拉长
- cv.equalizeHist(): 输入是灰度图像，输出是直方图均衡图像
## 自适应的直方图均衡
- 步骤
	- 将整幅图像分成很多小块（ **tiles 的 大小默认是 8x8**）
	- 对**每一个小块分别进行直方图均衡化**
	- 最后进行拼接
- `clahe = cv.createCLAHE(clipLimit, tileGridSize)`

## 直方图反投影